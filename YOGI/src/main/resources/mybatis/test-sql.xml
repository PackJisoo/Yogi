<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC " - //mybatis.org//DTD Config 3.0//EN" " http://mybatis.org/dtd/mybatis-3-mapper.dtd">
     
<mapper namespace="test">
   
   <!-- 회원가입 -->
	<insert id="insertMember" parameterType="MembersModel">
		INSERT INTO MEMBERS(m_no, m_id, m_name, m_password, m_phone, m_fav_area, m_fav_field, m_grade, m_penalty, m_lv, m_active, m_date, m_profile)
		VALUES(members_seq.nextval, #{m_id}, #{m_name}, #{m_password}, #{m_phone}, #{m_fav_area, jdbcType=VARCHAR}, #{m_fav_field, jdbcType=VARCHAR},  0, 0,'일반회원', 0, #{m_date}, #{m_profile, jdbcType=VARCHAR})
 	</insert>
	
	<select id="idCheck" resultType="int" parameterType="string">
		SELECT COUNT(*) FROM MEMBERS WHERE m_id=#{m_id}
	</select>
	
	<select id="loginCheck" resultType="MembersModel" parameterType="MembersModel">
		SELECT * FROM MEMBERS WHERE m_id = #{m_id} and m_password=#{m_password}
	</select>
	
	<select id="findId" resultType="MembersModel" parameterType="MembersModel">
		select * from members where m_name=#{m_name, jdbcType=VARCHAR} and m_phone=#{m_phone, jdbcType=VARCHAR}
	</select>
	<!-- 비밀번호 재설정 -->
	<select id="findPW" resultType="MembersModel" parameterType="MembersModel">
		select * from members where m_id=#{m_id, jdbcType=VARCHAR} and m_name=#{m_name, jdbcType=VARCHAR} and m_phone=#{m_phone, jdbcType=VARCHAR}
	</select>
	<update id="resetPW" parameterType="MembersModel">
		update members set m_password=#{m_password} where m_id=#{m_id}
	</update>
	
</mapper>   