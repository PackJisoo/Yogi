<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC " - //mybatis.org//DTD Config 3.0//EN" " http://mybatis.org/dtd/mybatis-3-mapper.dtd">
     
<mapper namespace="test">
   
   <!-- 회원가입 -->
	<insert id="insertMember" parameterType="MembersModel">
		INSERT INTO MEMBERS(m_no, m_id, m_name, m_password, m_phone, m_fav_area, m_fav_field, m_grade, m_penalty, m_lv, m_active, m_date, m_profile)
		VALUES(members_seq.nextval, #{m_id}, #{m_name}, #{m_password}, #{m_phone}, #{m_fav_area, jdbcType=VARCHAR}, #{m_fav_field, jdbcType=VARCHAR},  0, 0,'일반회원', 0, #{m_date}, #{m_profile, jdbcType=VARCHAR})
 	</insert>
	
	<select id="idCheck" resultType="int" parameterType="string">
		SELECT COUNT(*) FROM MEMBERS WHERE m_id=#{m_id}
	</select>
	
	<select id="loginCheck" resultType="MembersModel" parameterType="MembersModel">
		SELECT * FROM MEMBERS WHERE m_id = #{m_id} and m_password=#{m_password}
	</select>
	
	<select id="findId" resultType="MembersModel" parameterType="MembersModel">
		select * from members where m_name=#{m_name, jdbcType=VARCHAR} and m_phone=#{m_phone, jdbcType=VARCHAR}
	</select>
	<!-- 비밀번호 재설정 -->
	<select id="findPW" resultType="MembersModel" parameterType="MembersModel">
		select * from members where m_id=#{m_id, jdbcType=VARCHAR} and m_name=#{m_name, jdbcType=VARCHAR} and m_phone=#{m_phone, jdbcType=VARCHAR}
	</select>
	<update id="resetPW" parameterType="MembersModel">
		update members set m_password=#{m_password} where m_id=#{m_id}
	</update>
	<!-- 추천추천 -->
	<select id="check" resultType="MembersModel" parameterType="String">
		select * from members where m_id=#{m_id}
	</select>
	
	<select id = "test" resultType="hashmap" parameterType="hashmap">
		select * from group_gathering where
		<foreach collection="interest" item="item" index="index" open="(" separator="or" close=")">
			gg_category like #{item} 
		</foreach>
	</select>
	
	<select id="recommend" resultType="groupModel" parameterType="MembersModel">
		select * from group_gathering where 
	</select>
	<select id="fav_area" resultType="String" parameterType="String">
		select M_FAV_AREA from members where m_id =#{m_id}
	</select>
	<select id="fav_field" resultType="String" parameterType="String">
		select M_FAV_FIELD from members where m_id =#{m_id}
	</select>
	
	<select id="no_recommend" resultType="GroupModel">
		select * from Group_Gathering  order by  gg_no desc
	</select>
	
	<select id="recomment" resultType="GroupModel" parameterType="String">
		select * from Group_Gathering where ${param} order by  gg_no desc
	</select>
	
</mapper>   